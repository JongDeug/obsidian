[효율적인 테스트를 위핸 Stub 객체 사용](https://medium.com/daangn/%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9C%84%ED%95%9C-stub-%EA%B0%9D%EC%B2%B4-%ED%99%9C%EC%9A%A9%EB%B2%95-5c52a447dfb7#:~:text=Stub%3A%20%EC%83%81%ED%83%9C%20%EA%B2%80%EC%A6%9D%EC%9D%84%20%EC%82%AC%EC%9A%A9,%EA%B5%AC%EB%AC%B8%EC%9D%84%20%EC%82%AC%EC%9A%A9%ED%95%9C%20%EB%B6%80%EB%B6%84%20%EC%B0%B8%EA%B3%A0)

Mocking 과 Stubbing의 차이를 이해하려면 먼저 **Test Double**에 대해 알아볼 필요가 있다.

**Test Double**
실제 객체 대신 테스트 목적으로 사용되는 모든 종류의 가상 객체를 통용하는 용어.

은행 관련 실제 객체를 테스트에 사용하면 진짜 돈이 어디론가 송금 되는 아찔한 경험을 할 수 있음. 따라서 실제로 은행에 송금을 요청하지 않고 송금을 요청한 것처럼 행동한 뒤 성공이나 실패 응답만 주는 객체.

1. Dummy
	객체 전달은 하지만 실제로 사용되지 않는 것. 일반적으로 테스트할 대상을 구성하기 위해 값을 채우는 용도로만 사용.
2. Fake
	실제로 동작하는 구현을 가지고 있지만 일반적으로 프로덕션에 적합하지 않은 몇 가지 shortcut을 사용하는 객체.
3. Stub
	테스트에 필요한 호출에 대해 미리 준비된 답을 제공하는 객체. 일반적으로 테스트를 위해 작성된 기능 외에 다른 행동을 하지 않음.
4. Spy
	어떤 기능이 어떻게 호출되었는지에 따라 일부 정보를 기록하는 Stub의 일종
5. Mock
	예상된 동작을 가진 객체, Mock을 사용하면 내가 어떤 호출을 기대하고 그 호출에 대한 결과가 무엇인지 명세를 만들어놔야 함.

**Stubbing vs Mocking**
- Stub
	- 테스트에 필요한 호출에 대해 미리 준비된 답을 제공하는 객체
	- 실제 객체처럼 동작하는 클래스를 직접 구현하는데, 테스트에 필요한 구현에 집중하고 부가적인 기능은 구현하지 않음.
	- 상태 검증을 사용함. 어떤 입력에 대해서 어떤 출력이 발생하는지 검증함.
- Mock
- 
	- 예상된 동작을 가진 객체
	- 다양한 Mock Framework를 통해서 Mock 객체를 생성하고 특정 액션에 대한 출력을 정의
	- 행동 검증을 사용함. 입력과 상관없이 출력을 어떻게 만들어 내는지에 집중함.

가장 큰 차이는 상태 검증(state verification)과 행동 검증(behavior verification)임.

**그럼 어떨 때 Stub을 사용하고 어떤 경우에 Mock을 사용하면 좋을까?**
- 내가 검증하고 싶은 대상이 입력과 관계없이 어떤 행동을 했을 때 내가 원하는 출력이 나오기만 해도 상관없으면 ==Mock==. 다시 말해 `이메일을 한 번만 발송한다` 는 행동을 검증하고 싶을 때 `성공`만 출력해주면 되므로 Mock 사용.
- 반대로 입력에 따라 결과가 달라질 경우 ==Stub==. `송금 금액` 을 입력으로 주었을 때 결과가 `저장된 송금 결과` 인 상태 검증을 하고 싶을 땐 Stub 사용.
